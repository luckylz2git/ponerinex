#:kivy 1.9.0
#:import kivy kivy
#:import Factory kivy.factory.Factory 

# class XConnectScreen(Screen):
  # pass

<XConnectScreen>:
#Screen:
  #set back ground color
  AnchorLayout:
    anchor_x: 'left'
    anchor_y: 'top'
    #size_hint: None, None
    #size: root.width, root.height
    canvas:
      Color: 
        rgba: 0,0,0,1 #0.9,0.9,0.9,1
      Rectangle:
        size: self.size
        pos: self.pos
        #source: 'image/background.png'
    #title & logo
    BoxLayout:
      id: title
      orientation: 'horizontal'
      canvas:
        Color: 
          rgba: 0.95,0.95,0.95,1
        Rectangle:
          size: self.size
          pos: self.pos
      size_hint: None, None
      size: root.width, root.width/15 + root.width/20
      padding: root.width/40, root.width/40, root.width/20, root.width/40
      spacing: root.width/40
      Button:
        id: btnLogo
        #color: 0,0,0,1
        #text: "W%d H%d" %(root.width, root.width/15 + root.width/20)
        #text: "W: %d" %self.width #mac: 34x34, win: 37x37
        size_hint: None, None
        size: root.width/15, root.width/15
        background_normal: 'ximage/logo.png' #'image/xuetanlogow.png'
        background_down: 'ximage/logo.png'
        background_disabled_normal: 'ximage/logo.png' #'image/xuetanlogow.png' 
        state: 'normal'
        disabled: False
        on_release: root.manager.RefreshAllControls(self)
      Label:
        text_size: self.size
        size_hint: None, None
        size: root.width-(root.width/15+root.width/15*5+root.width/40*3+root.width/20), root.width/15
        halign: 'left'
        valign: 'middle'
        color: 0,0,0,1
        disabled_color: 0,0,0,1
        font_size: root.width/25
        text: '[size=%d]Ponerine.[/size][size=%d][b]X[/b][/size]' %(root.width/22,root.width/18)
        markup: True
      Spinner:
        id: btncamsetup
        size_hint: None, None
        size: root.width/15*5, root.width/15
        text_size: self.size
        halign: 'right'
        valign: 'middle'
        color: (0,0,1,1)
        disabled_color: (0,0,1,1)
        font_size: root.width/40
        #text: "W%d H%d" %(self.width, self.height)
        #values: ("")
        values: ("Camera 1","Camera 2","Camera 3","Camera 4","Camera 5","Camera 6","Camera 7","Camera 8","Advanced")
        background_normal: 'ximage/setting.png'
        background_down: 'ximage/setting.png'
        background_disabled_normal: 'ximage/setting.png'
        background_disabled_down: 'ximage/setting.png'
        #on_text: root.manager.ConfigPopupOpen(self, self.text)
        disabled: False
    GridLayout:
      id: grdCameraIcons
      size_hint: None, None
      size: root.width, (root.width - root.width/12*4)/3*2 + root.width/6 + root.width/25*1
      spacing: root.width/12, root.width/25
      padding: root.width/12, root.width/6, root.width/12, 0
      cols: 3
      #TextInput:
        #text: "W: %d H: %d" %(root.width, (root.width - root.width/12*4)/3*2 + root.width/6 + root.width/25*1)
      Button:
        id: btnCam0
        background_normal: 'ximage/cam_link_mid_bat.png'
        background_down: 'ximage/cam_link_mid_bat.png'
        #disabled: True
        text_size: self.size
        halign: 'center'
        valign: 'bottom'
        text: "[b][color=50e3c2]ON[/color] - [color=d0021b]60%[/color][/b]"
        markup: True
      Button:
        id: btnCam1
        background_normal: 'ximage/cam_link_charge.png'
        background_down: 'ximage/cam_link_charge.png'
        #disabled: True
        text_size: self.size
        halign: 'center'
        valign: 'bottom'
        text: "[b][color=50e3c2]ON[/color] - [color=d0021b]65%[/color][/b]"
        markup: True
      Button:
        id: btnCam2
        background_normal: 'ximage/cam_err_none_bat.png'
        background_down: 'ximage/cam_err_none_bat.png'
        #disabled: True
        text_size: self.size
        halign: 'center'
        valign: 'bottom'
        text: "[b][color=d0021b]OFF[/color]"
        markup: True
      Button:
        id: btnCam3
        background_normal: 'ximage/cam_err_low_bat.png'
        background_down: 'ximage/cam_err_low_bat.png'
        #disabled: True
        text_size: self.size
        halign: 'center'
        valign: 'bottom'
        text: "[b][color=d0021b]OFF[/color] - [color=d0021b]30%[/color][/b]"
        markup: True
      Button:
        id: btnCam4
        background_normal: 'ximage/cam_on_full_bat.png'
        background_down: 'ximage/cam_on_full_bat.png'
        #disabled: True
        text_size: self.size
        halign: 'center'
        valign: 'bottom'
        text: "[b][color=7ed321]OK[/color] - [color=7ed321]80%[/color][/b]"
        markup: True
      Button:
        id: btnCam5
        background_normal: 'ximage/cam_on_charge.png'
        background_down: 'ximage/cam_on_charge.png'
        #disabled: True
        text_size: self.size
        halign: 'center'
        valign: 'bottom'
        text: "[b][color=7ed321]OK[/color] - [color=7ed321]75%[/color][/b]"
        markup: True
    # connect icon
    AnchorLayout:
      id: buttons
      anchor_x: 'center'
      anchor_y: 'bottom'
      size_hint: None, None
      size: root.width, root.height - root.width/20 #* 0.95
      #padding: 0,0,0,root.width/10
      
      GridLayout:
        size_hint: None, None
        size: root.width, root.width/3 #root.width/6 + root.width/12 + (root.width - root.width/12*4)/3
        spacing: 0, 0
        #spacing: root.width/12, 0
        padding: 0,0,0,0
        #padding: root.width/12, root.width/6, root.width/12, 0
        cols: 3

        Button:
          size_hint: 1, 1
          #height: root.width/3
          #color: 1,0,0,1
          disabled_color: 0,0,0,0.5
          text: "[b]Buzzer[/b]"
          id: btnconnect
          #font_size: root.width/45
          text_size: self.size
          halign: 'center'
          valign: 'bottom'
          background_normal: 'ximage/buzzer_normal.png'
          background_down: 'ximage/buzzer_down.png'
          background_disabled_normal: 'ximage/buzzer_disabled.png'
          #background_disabled_down: 'image/mcamera_noip.png'
          on_release: root.manager.Connect(self)
          always_release: False
          markup: True
        Button:
          size_hint: 1, 1
          #height: root.width/3
          #color: 0,0,0,1
          disabled_color: 0,0,0,0.5
          #disabled: True
          text: "[b]Scene_001[/b]"
          id: btnrecord
          #font_size: root.width/45
          text_size: self.size
          halign: 'center'
          valign: 'bottom'
          background_normal: 'ximage/record_normal.png'
          background_down: 'ximage/record_down.png'
          background_disabled_normal: 'ximage/record_disabled.png'
          #background_disabled_down: 'image/mcamera_noip.png'
          #on_release: root.manager.Record(self)
          always_release: False
          markup: True
        Button:
          size_hint: 1, 1
          #height: root.width/3
          #color: 0,0,0,1
          disabled_color: 0,0,0,0.5
          #disabled: True
          text: "[b]Preview[/b]" #"PHOTO"
          id: btnphoto
          #font_size: root.width/45
          text_size: self.size
          halign: 'center'
          valign: 'bottom'
          background_normal: 'ximage/preview_normal.png'
          background_down: 'ximage/preview_down.png'
          background_disabled_normal: 'ximage/preview_disabled.png'
          #background_disabled_down: 'image/mcamera_noip.png'
          #on_release: root.manager.Buzzer(self) #Photo()
          always_release: False
          markup: True

    AnchorLayout:
      anchor_x: 'center'
      anchor_y: 'bottom'
      size_hint: None, None
      size: root.width, root.height - root.width/3 - root.width/20 - root.width/20 #* 0.95
      GridLayout:
        id: recordtime
        size_hint: 1, None
        height: root.width/5 + root.width/40 + root.width/40
        padding: root.width/40, 0, root.width/40, 0
        cols: 3
        Button:
          size_hint: None, None
          size: root.width/5,root.width/5
          background_normal: 'ximage/recording.png'
          background_down: 'ximage/recording.png'
        Label:       
          color: 1,1,1,1
          size_hint: 1, 1
          size_hint: None, None
          size: root.width - root.width/5 - root.width/5, root.width/5
          font_size: root.width/7
          text: "00:00:00"
        Label:
          size_hint: None, None
          size: root.width/5,root.width/5